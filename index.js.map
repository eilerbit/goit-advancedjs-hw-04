{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46478990-fb5d5efdf6e3e23306ddee690';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {  \n  const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15\n    };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });    \n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","export function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => `\n    <a href=\"${image.largeImageURL}\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n    </a>`).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst galleryElement = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loadingElement = document.querySelector('.loading');\nconst gallery = new SimpleLightbox('.gallery a');\n\nlet query = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = event.target.elements[0].value.trim();\n\n    if (!query) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term!'\n        });\n        return;\n    }\n\n    galleryElement.innerHTML = '';\n    loadMoreButton.classList.add('hidden');    \n    currentPage = 1;\n    fetchAndRenderImages();\n});    \n\nasync function fetchAndRenderImages() {\n    try {\n        loadingElement.classList.remove('hidden');\n        const data = await fetchImages(query, currentPage);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'No Results',\n                message: 'Sorry, there are no images matching your search query. Please, try again!'\n            });\n            return;\n        }\n\n        renderImages(data.hits);\n        gallery.refresh();\n\n        if (currentPage * 15 < totalHits) {\n            loadMoreButton.classList.remove('hidden');\n        } else {\n            iziToast.info({\n                title: 'End of Results',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n            loadMoreButton.classList.add('hidden');\n        }\n\n        const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n                \n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong, please try again later!'\n        });\n    } finally {\n        loadingElement.classList.add('hidden');\n    }\n}\n\nloadMoreButton.addEventListener('click', () => {\n    currentPage++;\n    fetchAndRenderImages();\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","error","renderImages","images","gallery","markup","image","form","galleryElement","loadMoreButton","loadingElement","SimpleLightbox","currentPage","totalHits","event","iziToast","fetchAndRenderImages","data","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,MAAMC,EAAS,CACT,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,EAEE,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIL,EAAU,CAAE,OAAAI,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCvBO,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GAAS;AAAA,eACtBA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA,SAC/C,EAAE,KAAK,EAAE,EAChBF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CCAA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAiB,SAAS,cAAc,UAAU,EAClDC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAiB,SAAS,cAAc,UAAU,EAClDN,EAAU,IAAIO,EAAe,YAAY,EAE/C,IAAId,EAAQ,GACRe,EAAc,EACdC,EAAY,EAEhBN,EAAK,iBAAiB,SAAU,MAAOO,GAAU,CAI7C,GAHAA,EAAM,eAAc,EACpBjB,EAAQiB,EAAM,OAAO,SAAS,CAAC,EAAE,MAAM,OAEnC,CAACjB,EAAO,CACRkB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACrB,CAAS,EACD,MACH,CAEDP,EAAe,UAAY,GAC3BC,EAAe,UAAU,IAAI,QAAQ,EACrCG,EAAc,EACdI,GACJ,CAAC,EAED,eAAeA,GAAuB,CAClC,GAAI,CACAN,EAAe,UAAU,OAAO,QAAQ,EACxC,MAAMO,EAAO,MAAMrB,EAAYC,EAAOe,CAAW,EAGjD,GAFAC,EAAYI,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CACxBF,EAAS,MAAM,CACX,MAAO,aACP,QAAS,2EACzB,CAAa,EACD,MACH,CAEDb,EAAae,EAAK,IAAI,EACtBb,EAAQ,QAAO,EAEXQ,EAAc,GAAKC,EACnBJ,EAAe,UAAU,OAAO,QAAQ,GAExCM,EAAS,KAAK,CACV,MAAO,iBACP,QAAS,4DACzB,CAAa,EACDN,EAAe,UAAU,IAAI,QAAQ,GAGzC,KAAM,CAAE,OAAQS,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,CAEJ,MAAe,CACZH,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+CACrB,CAAS,CACT,QAAc,CACNL,EAAe,UAAU,IAAI,QAAQ,CACxC,CACL,CAEAD,EAAe,iBAAiB,QAAS,IAAM,CAC3CG,IACAI,GACJ,CAAC"}